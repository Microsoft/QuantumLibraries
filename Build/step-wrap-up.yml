##
# Wrap-up: copy files to artifacts directory and publish
##

steps:
- task: PublishTestResults@2
  displayName: 'Publish tests results'
  condition: succeededOrFailed()
  inputs:
    testResultsFormat: VSTest
    testResultsFiles: '$(Libraries.WorkingDirectory)/**/*.trx'
    testRunTitle: 'Q# Libraries tests'

- task: PublishSymbols@1
  displayName: 'Publish symbols'
  continueOnError: true
  inputs:
    SearchPattern: '$(Libraries.WorkingDirectory)/src/**/*.pdb'

- task: PublishBuildArtifacts@1
  displayName: 'Publish Artifact: qsharp-runtime'
  condition: succeededOrFailed()
  inputs:
    PathtoPublish: '$(Build.ArtifactStagingDirectory)'
    artifactName: QuantumLibraries


